<script type="text/javascript">
  window.LandbotConfig = {
    "staticUrl": "https://storage.googleapis.com/static.yexir.com/",
    "serverUrl": "https://daisho.yexir.com",
    "channelToken": "H-91-VMD37U2F2B7A0CDL",
    "brandID": 251,
    "brandName": "Landbot.io",
    "logo": "https://storage.googleapis.com/media.yexir.com/receive/10145/W.png",
    "tagline": "Turn a landing page into a chatbot",
    "title": "Turn a landing page into a chatbot | Landbot",
    "description": "Landbot.io is a tool to easily create conversational experiences in substitution of landing pages. No coding required!",
    "apiKey": "AIzaSyDsVTr4OpOV45cfIXxcV1UvAEQ6JjnMbZU",
    "authDomain": "daisho-yexir.firebaseapp.com",
    "databaseURL": "https://daisho-yexir.firebaseio.com",
    "storageBucket": "daisho-yexir.appspot.com",
    "background-video": true,
    "videoname": "video",
    'custom': {
      "background-type": "\"gradient\"",
      "gradient-from": "#ff0051",
      "gradient-to": "#ffb389",
      "contrast": "white",
      "staticUrl": "\"https://storage.googleapis.com/static.yexir.com/\""
    },
    "onloadLivechatJS": "dynamicWelcome()"
  };

  window.STORAGE_KEY = 'helloumi-webchat-customer-' + window.LandbotConfig.channelToken;
  window.CST_BACKUP = localStorage.getItem( window.STORAGE_KEY );

  function loadHelloumiLandbot() {
    HULandbot = new Landbot(window.LandbotConfig);
    HULandbot.createLandbot();
  }

  function dynamicWelcome() {
    if ( localStorage.getItem(window.STORAGE_KEY) ) {
      localStorage.removeItem(window.STORAGE_KEY)
    }

    $('.btt').remove();
    $('.more-leads').after('<a href="http://landbot.io/customers/buildbot?utm_source=referral&amp;utm_medium=customers&amp;utm_campaign=Landbot.io" target="_blank" class="btt" id="rightheader"><span class="btt-content">Create your <b class="hu-bold">Landbot</b></span><span class="btt-on-hover">Start now ‚ö°Ô∏è</span></a><a href="http://landbot.io/?utm_source=referral&amp;utm_medium=customers&amp;utm_campaign=Landbot.io" target="_blank" class="ph" id=""><img src="https://s3.producthunt.com/static/kitty_265x244%402x.png"></a>');

    renderHelloumiLiveChat( false, loadStaticWelcome);
    // document.getElementById('hu-webchat-loader').style.setProperty('display', 'none', 'important');
  }

  function loadStaticWelcome() {
    var firstTimeBot = {
      "name": "Welcome",
      "init": "welcome_0",
      "status": {
        "welcome_0": {
          "text": "Hi there *Hunter*! üòª",
          "next": "welcome_1",
          "extra": {
            "hide_textbox": true
          }
        },
        "welcome_1": {
          "text": "You thought you would find a Landing Page here, uh?",
          "next": "welcome_2",
          "extra": {
            "hide_textbox": true
          }
        },
        "welcome_2": {
          "image": "files/botimg/welcome.gif",
          "next": "welcome_3",
          "extra": {
            "hide_textbox": true
          }
        },
        "welcome_3": {
          "text": "Well, the problem with Landing Pages is that they hardly engage... ü§ñ",
          "next": "welcome_4",
          "extra": {
            "hide_textbox": true
          }
        },
        "welcome_4": {
          "text": "And you might think _‚ÄúWell, you‚Äôre a chatbot, I‚Äôve seen thousands like you...‚Äù_",
          "buttons": [
            { "caption": "Nah, I like you üôÇ", "next": false },
            { "caption": "Yes you‚Äôre right‚Ä¶ üòí", "next": false }
          ],
          "next": false,
          "extra": {
            "hide_textbox": true
          }
        }
      }
    };
    var welcomeBackBot = {
      "name": "Welcome",
      "init": "welcome_0",
      "status": {
        "welcome_0": {
          "text": "Welcome back!",
          "next": ["welcome_1"],
          "extra": {
            "hide_textbox": true
          }
        },
        "welcome_1": {
          "text": "So good to see you around again üòô",
          "next": "welcome_2",
          "extra": {
            "hide_textbox": true
          }
        },
        "welcome_2": {
          "text": "Please tell me, do you want to start the conversation again or continue right where you left it?",
          "buttons": [
            { "caption": "Start again", "event": "restart", "next": false },
            { "caption": "Continue", "event": "continue", "next": false }
          ],
          "extra": {
            "hide_textbox": true
          }
        }
      }
    }

    if ( window.CST_BACKUP ) {
      __data = welcomeBackBot;
    } else {
      __data = firstTimeBot;
    }

    window.jsbot = new ForaBotController();
    window.jsbot.on('output', forabotMessageReceived);
    window.jsbot.on('input', forabotMessageSent);
    window.jsbot.on('typing', forabotTypingState);
    window.jsbot.on('finish', function(){
      if (window.sendMessageBackup) {
        helloumi.webchat.umichatcore.sendMessage = window.sendMessageBackup;
        window.sendMessageBackup = false;
      }
      // $('#hu-container-widget').attr('data-textbox', 'show');
    });

    //
    // Custom events
    //
    window.jsbot.on('custom.clear', function(){
      $('#hu-webchat-messages').empty();
    });

    window.jsbot.on('custom.continue', function(){
      if ( window.CST_BACKUP ) {
        localStorage.setItem(window.STORAGE_KEY, window.CST_BACKUP);
      }
      helloumi.webchat.umichatcore.off('render', loadStaticWelcome) // Don't load this static welcome again
      loadHelloumiLiveChat();
    });

    window.jsbot.on('custom.restart', function(){
      if ( localStorage.getItem(window.STORAGE_KEY) ) {
        localStorage.removeItem(window.STORAGE_KEY)
        window.CST_BACKUP = null;
      }
      loadHelloumiLiveChat();
    });

    //
    // JsBot load
    //
    window.jsbot.load(
      new ForaBot(Date.now().toString(), __data )
    );

    if ( window.CST_BACKUP ) {
      window.sendMessageBackup = window.sendMessageBackup || helloumi.webchat.umichatcore.sendMessage;
      helloumi.webchat.umichatcore.sendMessage = function( formData ) {
        var __message = helloumi.webchat.umichatgui.container.querySelector('#hu-composer-box').value;
        window.jsbot.send(__message);
      };
    }

    window.jsbot.start();

    if ( window.CST_BACKUP ) {
      localStorage.setItem(window.STORAGE_KEY, window.CST_BACKUP);
    }
  }
</script>
<script src="https://storage.googleapis.com/static.yexir.com/landbot/js/landbot-1.0.0.js" onload="loadHelloumiLandbot()" charset="UTF-8"></script>
